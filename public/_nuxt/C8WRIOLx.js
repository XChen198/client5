import{E as ae}from"./NkgphkwY.js";import{a as oe,E as se}from"./BP04w6uM.js";import{_ as ne}from"./BDtMiokZ.js";import{E as ie}from"./B1sV65LB.js";import{_ as F}from"./BQU9x2pH.js";import{E as ue}from"./2NZr4Mmw.js";import{E as de,a as re,b as ce}from"./C23DQU1G.js";import{E as _e,a as pe}from"./CeaJMaa7.js";import{E as me,_ as he}from"./CZiLuAN9.js";import{E as ve}from"./AEnOYdjy.js";import{E as fe}from"./CZX_mret.js";import{E as G}from"./BrhpWW4a.js";import"./vQi6h-p6.js";import{f as ge,g as we,r as p,h as ye,a1 as j,c as i,b as a,w as l,o,a as e,i as r,d as u,k as m,j as h,N as V,O as z,t as v,a2 as xe,p as be,e as Ee}from"./Dh4ENSPc.js";import{u as ke,a as Ce}from"./Xu3fRhgo.js";import{u as Ve}from"./FKMdIz4G.js";import{_ as ze}from"./DlAUqK2U.js";import"./CoS429Et.js";import"./r5W6hzzQ.js";import"./BGpyNCB4.js";import"./B_pKZ7vX.js";const s=E=>(be("data-v-120630dd"),E=E(),Ee(),E),Me=s(()=>e("h1",null,"NYKnow.com",-1)),Se=s(()=>e("span",null,null,-1)),Be=s(()=>e("span",null,null,-1)),Te=s(()=>e("span",null," 在此输入帖子的标题和分类,分类可以不选或选择'不选'这个选项(默认) ",-1)),Ie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",style:{width:"20px","vertical-align":"bottom"}},$e=s(()=>e("path",{fill:"currentColor",d:"M704 192h160v736H160V192h160v64h384zM288 512h448v-64H288zm0 256h448v-64H288zm96-576V96h256v96z"},null,-1)),Le=[$e],He=s(()=>e("span",null,"最热帖子",-1)),Ne={class:"latestPost"},Pe=s(()=>e("span",null,"公告",-1)),Ae=s(()=>e("p",null,"本站旨在建立一个可用于交流的社区，你可以以游客的方式浏览内容或是创建一个账户来发表帖子，但禁止发布辱骂等敏感词汇，感谢大家的配合",-1)),Ue=s(()=>e("p",null,"本站旨在建立一个可用于交流的社区，你可以以游客的方式浏览内容或是创建一个账户来发表帖子，但禁止发布辱骂等敏感词汇，感谢大家的配合",-1)),Oe=s(()=>e("div",{style:{height:"1px"}},null,-1)),Fe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},Ge=s(()=>e("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"},null,-1)),je=[Ge],De=s(()=>e("span",{style:{"padding-left":"5px"}}," 首页 ",-1)),Re=s(()=>e("div",{class:"flex-grow"},null,-1)),Ke={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},We=s(()=>e("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"},null,-1)),Ye=[We],Ze=s(()=>e("span",{style:{"padding-left":"5px","padding-right":"15px"}},"搜索",-1)),qe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},Je=s(()=>e("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"},null,-1)),Qe=[Je],Xe=s(()=>e("span",{style:{"padding-left":"5px"}},"注册/登录",-1)),et={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},tt=s(()=>e("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"},null,-1)),lt=[tt],at={style:{"padding-left":"5px"}},ot={key:0,class:"searchBox"},st=s(()=>e("img",{src:he},null,-1)),nt=["innerHTML"],it={style:{float:"right"}},ut={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"20px","vertical-align":"text-bottom"}},dt=s(()=>e("path",{fill:"currentColor",d:"m174.72 855.68 135.296-45.12 23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160 128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512 64 299.904 256 96 512 96s448 203.904 448 416-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1)),rt=s(()=>e("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4"},null,-1)),ct=[dt,rt],_t={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"20px","vertical-align":"text-bottom"}},pt=s(()=>e("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"},null,-1)),mt=[pt],ht=ge({__name:"index",async setup(E){let c,k;const g=we(),B=Ve(),D=p("1"),w=p(""),y=p(""),M=p(!1),_=p(!1),C=p(1),S=p(!1);ye(async()=>{try{const n=await $fetch("https://nyknow.com/api/user",{method:"GET",credentials:"include"});n.code===0?(_.value=!0,B.setUserInfo(n.data)):_.value=!1}catch{}});const{data:R}=([c,k]=j(()=>ke("http://nyknow.com/api/post/gethot",{method:"GET",credentials:"include"},"$OF2VfZTw5z")),c=await c,k(),c),{data:x}=([c,k]=j(()=>Ce("posts",()=>$fetch(`http://nyknow.com/api/post/get?currentPage=${C.value}&keyWord=${w.value}&type=${y.value}`,{method:"GET",credentials:"include",key:"posts"}),{watch:[S,C]})),c=await c,k(),c);console.log("client2:",x.value);const K=async n=>{n==="1"?g.push("/"):n==="2"?M.value=!M.value:n==="3"?I():n==="4-1"?g.push("/account/publish"):n==="4-2"&&$()},W=n=>{C.value=n},T=async()=>{S.value=!S.value},I=()=>{g.push("/login")},Y=()=>{g.push("/signup")},$=async()=>{try{const n=await $fetch("https://nyknow.com/api/auth/logout",{method:"POST",credentials:"include"});n.code===0?(_.value=!1,G.success(n.message)):G.error("退出登录失败，请稍后再试")}catch{}},L=[{value:"招聘",label:"招聘"},{value:"求职",label:"求职"},{value:"出租",label:"出租"},{value:"新闻",label:"新闻"},{value:"活动",label:"活动"},{value:"生活",label:"生活"},{value:"科技",label:"科技"},{value:"娱乐",label:"娱乐"},{value:"教育",label:"教育"},{value:"社会",label:"社会"},{value:"编程",label:"编程"},{value:"其他",label:"其他"},{value:"",label:"不选"}];return(n,d)=>{const f=ae,H=oe,N=se,P=ne,A=ie,Z=F,U=ue,b=de,q=re,J=ce,O=pe,Q=me,X=F,ee=ve,te=fe,le=_e;return o(),i("div",null,[a(le,null,{default:l(()=>[a(O,{xs:24,sm:24,md:6,lg:6,xl:6},{default:l(()=>[e("aside",null,[Me,_.value?m("",!0):(o(),r(f,{key:0,plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:I},{default:l(()=>[u("登录")]),_:1})),Se,_.value?m("",!0):(o(),r(f,{key:1,plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:Y},{default:l(()=>[u("注册")]),_:1})),_.value?(o(),r(f,{key:2,type:"primary",plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:d[0]||(d[0]=t=>h(g).push("/account/publish"))},{default:l(()=>[u("个人中心")]),_:1})):m("",!0),Be,_.value?(o(),r(f,{key:3,type:"danger",plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:$},{default:l(()=>[u("退出登录")]),_:1})):m("",!0),Te,e("div",null,[a(P,null,{default:l(()=>[a(N,{modelValue:y.value,"onUpdate:modelValue":d[1]||(d[1]=t=>y.value=t),placeholder:"选择分类",style:{width:"100%"}},{default:l(()=>[(o(),i(V,null,z(L,t=>a(H,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(A,{modelValue:w.value,"onUpdate:modelValue":d[2]||(d[2]=t=>w.value=t),placeholder:"输入要搜索的关键词",type:"text"},null,8,["modelValue"]),a(f,{type:"primary",style:{width:"100%","margin-top":"10px"},onClick:T},{default:l(()=>[u("搜索")]),_:1})]),(o(),i("svg",Ie,Le)),He,e("div",Ne,[e("ul",null,[(o(!0),i(V,null,z(h(R).data,t=>(o(),i("li",null,[a(Z,{to:`/post/${t._id}`,class:"hotPost"},{default:l(()=>[u(v(t.title),1)]),_:2},1032,["to"])]))),256))])]),Pe,e("div",null,[a(U,{shadow:"always"},{default:l(()=>[Ae]),_:1}),a(U,{shadow:"always"},{default:l(()=>[Ue]),_:1})]),Oe]),e("header",null,[a(J,{"default-active":D.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:K},{default:l(()=>[a(b,{index:"1"},{default:l(()=>[(o(),i("svg",Fe,je)),De]),_:1}),Re,a(b,{index:"2"},{default:l(()=>[(o(),i("svg",Ke,Ye)),Ze]),_:1}),_.value?(o(),r(q,{key:1,index:"4","close-on-click-outside":"true"},{title:l(()=>{var t;return[(o(),i("svg",et,lt)),e("span",at,v((t=h(B).userInfo)==null?void 0:t.username),1)]}),default:l(()=>[a(b,{index:"4-1"},{default:l(()=>[u("个人中心")]),_:1}),a(b,{index:"4-2",style:{color:"#f56c6c"}},{default:l(()=>[u(" 退出登录 ")]),_:1})]),_:1})):(o(),r(b,{key:0,index:"3"},{default:l(()=>[(o(),i("svg",qe,Qe)),Xe]),_:1}))]),_:1},8,["default-active"]),a(xe,{name:"el-zoom-in-top"},{default:l(()=>[M.value?(o(),i("div",ot,[a(A,{modelValue:w.value,"onUpdate:modelValue":d[4]||(d[4]=t=>w.value=t),placeholder:"输入关键词",size:"large"},{prepend:l(()=>[a(P,null,{default:l(()=>[a(N,{modelValue:y.value,"onUpdate:modelValue":d[3]||(d[3]=t=>y.value=t),placeholder:"选择",style:{width:"105px"},size:"large"},{default:l(()=>[(o(),i(V,null,z(L,t=>a(H,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),append:l(()=>[a(f,{type:"primary",style:{width:"70px"},onClick:T},{default:l(()=>[u("搜索")]),_:1})]),_:1},8,["modelValue"])])):m("",!0)]),_:1})])]),_:1}),a(O,{xs:24,sm:24,md:18,lg:18,xl:18},{default:l(()=>[e("main",null,[(o(!0),i(V,null,z(h(x).data.result,t=>(o(),r(X,{key:t._id,to:`/post/${t._id}`},{default:l(()=>[e("div",null,[a(Q,{size:50,src:t.avatar,style:{"vertical-align":"middle"}},{default:l(()=>[st]),_:2},1032,["src"]),e("span",null,v(t.username),1),e("h4",null,v(t.title),1),e("p",{class:"content",innerHTML:t.content,style:{width:"100%","margin-bottom":"5px"}},null,8,nt),e("span",null,v(t.createdAt.split("T")[0]),1),e("span",it,[(o(),i("svg",ut,ct)),u(" "+v(t.comments)+" ",1),(o(),i("svg",_t,mt)),u(" "+v(t.visitors),1)])])]),_:2},1032,["to"]))),128)),h(x).data.total!==0?(o(),r(ee,{key:0,background:"",layout:"prev, pager, next",total:h(x).data.total,"page-size":10,"pager-count":5,style:{"justify-content":"center"},"current-page":C.value,onCurrentChange:W},null,8,["total","current-page"])):m("",!0),h(x).data.total===0?(o(),r(te,{key:1,description:"没有找到对应的帖子","image-size":200})):m("",!0)])]),_:1})]),_:1})])}}}),Pt=ze(ht,[["__scopeId","data-v-120630dd"]]);export{Pt as default};
