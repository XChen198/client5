import{E as y}from"./B1sV65LB.js";import{E as b,a as E}from"./CNSLevp2.js";import{E as V}from"./NkgphkwY.js";import{_ as F}from"./BQU9x2pH.js";import{E as p}from"./BrhpWW4a.js";import{f as k,g as v,r as I,J as c,c as S,b as e,w as r,N,o as B,d as l,a as d,p as C,e as R}from"./Dh4ENSPc.js";import{_ as q}from"./DlAUqK2U.js";import"./BGpyNCB4.js";import"./CoS429Et.js";import"./iEayIuJa.js";import"./r5W6hzzQ.js";const J=a=>(C("data-v-fde4d032"),a=a(),R(),a),O=J(()=>d("h1",null,"登录",-1)),T={class:"goHome"},U={class:"goSignup"},$=k({__name:"index",setup(a){const f=v(),i=I(),t=c({username:"",password:""}),g=c({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),w=m=>{m&&m.validate(async o=>{if(o)try{const s=await $fetch("https://nyknow.com/api/auth/login",{method:"POST",credentials:"include",body:JSON.stringify({username:t.username,password:t.password})});s.code===0?(p.success(s.message),f.push("/")):p.error(s.message)}catch{p.error("登录失败,请稍后再试")}})};return(m,o)=>{const s=y,u=E,h=V,_=F,x=b;return B(),S(N,null,[O,e(x,{ref_key:"ruleFormRef",ref:i,model:t,rules:g,style:{"max-width":"600px",margin:"0 auto"},"label-width":"auto"},{default:r(()=>[e(u,{label:"用户名",prop:"username"},{default:r(()=>[e(s,{modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=n=>t.username=n)},null,8,["modelValue"])]),_:1}),e(u,{label:"密码",prop:"password"},{default:r(()=>[e(s,{type:"password",modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=n=>t.password=n)},null,8,["modelValue"])]),_:1}),e(u,null,{default:r(()=>[e(h,{type:"primary",onClick:o[2]||(o[2]=n=>w(i.value)),style:{width:"100%"}},{default:r(()=>[l("登录")]),_:1})]),_:1}),d("span",T,[e(_,{to:"/"},{default:r(()=>[l("返回首页")]),_:1})]),d("span",U,[l("没有账号? "),e(_,{to:"/signup"},{default:r(()=>[l("去注册")]),_:1})])]),_:1},8,["model","rules"])],64)}}}),W=q($,[["__scopeId","data-v-fde4d032"]]);export{W as default};
