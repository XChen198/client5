import{E as p,a as k}from"./BrhpWW4a.js";import{E as V,a as b,b as z}from"./C23DQU1G.js";import{E,a as B}from"./CeaJMaa7.js";import{f as S,g as y,r as H,h as I,i as h,w as a,o as m,b as t,a as e,t as L,j as A,k as N,_ as T,p as q,e as $}from"./Dh4ENSPc.js";import"./vQi6h-p6.js";import{u as G}from"./FKMdIz4G.js";import{_ as P}from"./DlAUqK2U.js";import"./r5W6hzzQ.js";import"./BGpyNCB4.js";const o=r=>(q("data-v-208a5497"),r=r(),$(),r),R=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"})],-1)),U=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})],-1)),j=o(()=>e("span",null," 返回首页 ",-1)),D=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),e("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})],-1)),O=o(()=>e("span",null," 发布帖子 ",-1)),F=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"m512 863.36 384-54.848v-638.72L525.568 222.72a96 96 0 0 1-27.136 0L128 169.792v638.72zM137.024 106.432l370.432 52.928a32 32 0 0 0 9.088 0l370.432-52.928A64 64 0 0 1 960 169.792v638.72a64 64 0 0 1-54.976 63.36l-388.48 55.488a32 32 0 0 1-9.088 0l-388.48-55.488A64 64 0 0 1 64 808.512v-638.72a64 64 0 0 1 73.024-63.36z"}),e("path",{fill:"currentColor",d:"M480 192h64v704h-64z"})],-1)),J=o(()=>e("span",null," 查看已发布的帖子 ",-1)),K=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0m544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"})],-1)),Q=o(()=>e("span",null," 我的信息 ",-1)),W=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"M628.736 528.896A416 416 0 0 1 928 928H96a415.872 415.872 0 0 1 299.264-399.104L512 704zM720 304a208 208 0 1 1-416 0 208 208 0 0 1 416 0"})],-1)),X=o(()=>e("span",null," 我的头像 ",-1)),Y=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96"}),e("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32m192-160v-64a192 192 0 1 0-384 0v64zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64"})],-1)),Z=o(()=>e("span",null," 管理员 ",-1)),e0=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":""},[e("path",{fill:"currentColor",d:"M352 159.872V230.4a352 352 0 1 0 320 0v-70.528A416.128 416.128 0 0 1 512 960a416 416 0 0 1-160-800.128z"}),e("path",{fill:"currentColor",d:"M512 64q32 0 32 32v320q0 32-32 32t-32-32V96q0-32 32-32"})],-1)),a0=o(()=>e("span",null," 退出登录 ",-1)),t0=S({__name:"index",setup(r){const l=y(),d=G(),u=H(!1);I(async()=>{try{const s=await $fetch("https://nyknow.com/api/user",{method:"GET",credentials:"include"});s.code===0?d.setUserInfo(s.data):l.push("/login"),(await $fetch("https://nyknow.com/api/permission/check",{method:"GET",credentials:"include"})).code===0?u.value=!0:u.value=!1}catch{l.push("/")}});const v=s=>{switch(s){case"1-0":l.push("/");break;case"1-1":l.push("/account/publish");break;case"1-2":l.push("/account/published");break;case"1-3":l.push("/account/info");break;case"1-4":l.push("/account/avatar");break;case"1-5":l.push("/account/admin");break;case"1-6":f();break}},f=async()=>{try{const s=await $fetch("https://nyknow.com/api/auth/logout",{method:"POST",credentials:"include"});s.code===0?(p.success(s.message),l.push("/")):p.error("退出登录失败，请稍后再试")}catch{}};return(s,w)=>{const n=k,c=V,x=b,g=z,i=B,M=T,C=E;return m(),h(C,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:6,xl:6},{default:a(()=>[t(g,{"default-active":"1-1",class:"el-menu-vertical-demo",onSelect:v,"default-openeds":["1"]},{default:a(()=>[t(x,{index:"1"},{title:a(()=>{var _;return[t(n,null,{default:a(()=>[R]),_:1}),e("span",null,"用户名:"+L((_=A(d).userInfo)==null?void 0:_.username),1)]}),default:a(()=>[t(c,{index:"1-0"},{default:a(()=>[t(n,null,{default:a(()=>[U]),_:1}),j]),_:1}),t(c,{index:"1-1"},{default:a(()=>[t(n,null,{default:a(()=>[D]),_:1}),O]),_:1}),t(c,{index:"1-2"},{default:a(()=>[t(n,null,{default:a(()=>[F]),_:1}),J]),_:1}),t(c,{index:"1-3"},{default:a(()=>[t(n,null,{default:a(()=>[K]),_:1}),Q]),_:1}),t(c,{index:"1-4"},{default:a(()=>[t(n,null,{default:a(()=>[W]),_:1}),X]),_:1}),u.value?(m(),h(c,{key:0,index:"1-5"},{default:a(()=>[t(n,null,{default:a(()=>[Y]),_:1}),Z]),_:1})):N("",!0),t(c,{index:"1-6"},{default:a(()=>[t(n,null,{default:a(()=>[e0]),_:1}),a0]),_:1})]),_:1})]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:18,lg:18,xl:18},{default:a(()=>[e("main",null,[t(M)])]),_:1})]),_:1})}}}),_0=P(t0,[["__scopeId","data-v-208a5497"]]);export{_0 as default};
