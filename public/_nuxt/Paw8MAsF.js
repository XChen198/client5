import{E as O}from"./ne-LEtTm.js";import{E as V,a as q}from"./BP04w6uM.js";import{E as C}from"./B1sV65LB.js";import{_ as T}from"./BDtMiokZ.js";import{E as B}from"./NkgphkwY.js";import{E as d}from"./BrhpWW4a.js";import"./vQi6h-p6.js";import{Q as S}from"./Cc0l5TVS.js";import{f as N,r as g,c as f,b as o,w as n,N as _,a as m,o as b,d as p,O as F,j as I}from"./Dh4ENSPc.js";import"./CoS429Et.js";import"./BGpyNCB4.js";import"./B_pKZ7vX.js";import"./r5W6hzzQ.js";const M=m("h5",null,"选择分类：",-1),j=m("h5",null,"标题：",-1),z=m("br",null,null,-1),Z=N({__name:"publish",setup(L){const i=g(""),r=g(""),u=g(""),h=[{value:"招聘",label:"招聘"},{value:"求职",label:"求职"},{value:"出租",label:"出租"},{value:"新闻",label:"新闻"},{value:"活动",label:"活动"},{value:"生活",label:"生活"},{value:"科技",label:"科技"},{value:"娱乐",label:"娱乐"},{value:"教育",label:"教育"},{value:"社会",label:"社会"},{value:"编程",label:"编程"},{value:"其他",label:"其他"}],y={theme:"snow",placeholder:"请输入内容",modules:{toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],handlers:{image:function(){var l;(l=document.getElementById("getFile"))==null||l.click()}}}}},v=async l=>{try{const e=l.target.files[0],a=new FormData;a.append("img",e);const s=await $fetch("https://nyknow.com/api/post/upload",{method:"POST",credentials:"include",body:a});if(s.code===0){const c=document.querySelector(".ql-editor");c&&(c.innerHTML+=`<img src="${s.data}" alt="contentImg" style="max-width: 100%; max-height: 400px;">`)}else d.error(s.message)}catch{}},x=async()=>{try{const l=await $fetch("https://nyknow.com/api/post/create",{method:"POST",credentials:"include",body:JSON.stringify({type:i.value,title:r.value,content:u.value})});if(l.code===0){d.success(l.message),i.value="",r.value="",u.value="";const e=document.querySelector(".ql-editor");e&&(e.innerHTML="")}else d.error(l.message)}catch{}};return(l,e)=>{const a=O,s=q,c=V,E=C,k=T,w=B;return b(),f(_,null,[o(a,{class:"mx-1",type:"info"},{default:n(()=>[p("发布帖子")]),_:1}),M,o(c,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),placeholder:"选择",style:{width:"100%"},size:"large"},{default:n(()=>[(b(),f(_,null,F(h,t=>o(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),j,o(E,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t),style:{width:"100%",height:"40px","margin-bottom":"20px"},placeholder:"标题推荐在30字以内"},null,8,["modelValue"]),o(a,{class:"mx-1",type:"danger"},{default:n(()=>[p("注意: 单张图片不能高于2MB!")]),_:1}),z,o(a,{class:"mx-1",type:"warning"},{default:n(()=>[p("上传图片成功后请稍作等待，图片会加载在输入框中")]),_:1}),o(k,null,{default:n(()=>[o(I(S),{options:y,content:u.value,"onUpdate:content":e[2]||(e[2]=t=>u.value=t),"content-type":"html",style:{"min-height":"150px"}},null,8,["content"]),m("input",{type:"file",style:{display:"none"},id:"getFile",onChange:e[3]||(e[3]=t=>v(t)),accept:"image/gif,image/jpeg,image/jpg,image/png"},null,32)]),_:1}),o(w,{type:"primary",size:"large",style:{"margin-top":"20px",width:"100%"},onClick:x},{default:n(()=>[p("发布")]),_:1})],64)}}});export{Z as default};
